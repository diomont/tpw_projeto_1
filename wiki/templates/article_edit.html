{% extends "layout.html" %}
{% block content %}
{% load custom_tags %}

    <div class="px-3">
    <form action="/savearticle/" method="post" class="form-horizontal">
        <div class="row">
            {% csrf_token %}
            <div class="p-4 col-8 bg-light text-dark">

                <h1 class="display-4">{{ form.title }}</h1>
                <div class="d-flex flex-row-reverse mb-1">
                    {{ form.categories }}
                    <!-- <button type="button" class="btn btn-outline-secondary">Category</button> -->
                </div>
                <h3>{{ form.short_description }}</h3>
                <p class="lead">{{ form.main_text }}</p>

                <br>


                <div id="section_formgroup">
                {{ sectionset.management_form }}
                {% for section in sectionset %}
                    <div id="{{ section_count|slugify|add:"_section_form" }}" >
                        <h5>{{ section.title }}</h5>
                        {{ section.text }}
                        <br />
                        {{ section.image }}
                        <button type="button" onclick="delete_section(this)">Delete Section</button>
                    </div>
                {% endfor %}
                </div>
                <button type="button">New Section</button>
            </div>

            <div class="p-4 col-4">
                <div class="card">
                    {{ form.main_image }}
                    <div class="card-body">
                        <table class="table">

                            <!-- ERASE when we have content -->
                            <thead>
                                <tr>
                                    <th scope="col">Field</th>
                                    <th scope="col">Value</th>
                                </tr>
                            </thead>
                            <!-- till here -->
                            {{ form.side_card }}
                        </table>
                        <button type="button" onclick="new_side_card_field()" >New field</button>
                    </div>
                </div>
            </div>
        </div>
        <button type="submit">Save Changes</button>
    </form>
    </div>

    <footer class="bg-light text-center text-lg-start">
        <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
            Footer for edit data
        </div>
    </footer>

    <script>
        // disable default input element behaviour for Enter key
        input_elems = document.getElementsByTagName("input")
        for (const el of input_elems) {
            if (el.type == "search") continue
            el.addEventListener("keypress", (ev) => {
                if (ev.key === "Enter") {
                    ev.preventDefault()
                }
            })
        }

        new_section = () => {

        }

        delete_section = (elem) => {

        }

    </script>

{% endblock %}